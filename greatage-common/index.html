<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Feb 22, 2011 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>GreatAge Common Utilities - GreatAge Common Utilities</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20110222" />
    <meta http-equiv="Content-Language" content="en" />
        
  </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                GreatAge Common Utilities
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                <div class="xleft">
        <span id="publishDate">Last Published: 22 Feb 2011</span>
                  &nbsp;| <span id="projectVersion">Version: 1.1-SNAPSHOT</span>
                      </div>
            <div class="xright">        
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>Parent Project</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="GreatAge Project">GreatAge Project</a>
            </li>
          </ul>
                       <h5>Project Information</h5>
                  <ul>
                  <li class="none">
            <strong>Introduction</strong>
          </li>
                  <li class="none">
                          <a href="project-summary.html" title="Project Summary">Project Summary</a>
            </li>
                  <li class="none">
                          <a href="dependencies.html" title="Dependencies">Dependencies</a>
            </li>
          </ul>
                       <h5>Project Reports</h5>
                  <ul>
                  <li class="none">
                          <a href="checkstyle.html" title="Checkstyle">Checkstyle</a>
            </li>
                  <li class="none">
                          <a href="surefire-report.html" title="Surefire Report">Surefire Report</a>
            </li>
                  <li class="none">
                          <a href="cobertura/index.html" title="Cobertura Test Coverage">Cobertura Test Coverage</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Introduction<a name="Introduction"></a></h2><p>GreatAge Common module provides a set of utilities that helps to simplify work with java core classes and classes from other java-based frameworks like hibernate, javassist, etc. They doesn't provide any architecture, only base, most-needed methods. All utilities are divided to:</p><ul><li><a href="#Common_utilities">Common utilities</a><ul><li><a href="#Collection_utilities">Collection utilities</a></li><li><a href="#String_utilities">String utilities</a></li><li><a href="#Encode_utilities">Encode utilities</a></li><li><a href="#Internationalization_utilities">Internationalization utilities</a></li><li><a href="#Reflection_utilities">Reflection utilities</a></li><li><a href="#Ordering_utilities">Ordering utilities</a></li><li><a href="#Lock_utilities">Lock utilities</a></li><li><a href="#Other_helpers">Other helpers</a></li></ul></li><li><a href="#Javassist_utilities">Javassist utilities</a></li><li><a href="#Hibernate_utilities">Hibernate utilities</a></li></ul></div><div class="section"><h2><a name="Common_utilities">Common utilities</a><a name="Common_utilities"></a></h2><p>This utilities provides classes that simplifies work with core java APIs.</p><div class="section"><h3><a name="Collection_utilities">Collection utilities</a><a name="Collection_utilities"></a></h3><p>They are represented by abstract class CollectionUtils. This utility can be used for collection creation with already defined elements. It supports creation of set, list, map and their concurrent variants For example, creation of concurrent set can look like:</p><div class="source"><pre>final Set&lt;String&gt; names = CollectionUtils.newConcurrentSet(&quot;Name1&quot;, &quot;Name2&quot;, &quot;Name3&quot;, &quot;Name4&quot;);
</pre></div><p>Creation of map is more complex as it consists of two different collections, keys and values. So it creation may look like:</p><div class="source"><pre>final Map&lt;String, Integer&gt; variables = CollectionUtils.newMap(&quot;var1&quot;, 1, &quot;var2&quot;, 2, &quot;var3&quot;, 3);
</pre></div><p>Below is a table that describes what collection type is created by certain utility method:</p><table align="center" border="1" class="bodyTable"><tr class="a"><th align="center">Method</th><th align="center">Implementation class</th></tr><tr class="b"><td align="center">newSet(...)</td><td align="center">java.util.HashSet</td></tr><tr class="a"><td align="center">newConcurrentSet(...)</td><td align="center">java.util.concurrent.CopyOnWriteArraySet</td></tr><tr class="b"><td align="center">newList(...)</td><td align="center">java.util.ArrayList</td></tr><tr class="a"><td align="center">newConcurrentList(...)</td><td align="center">java.util.concurrent.CopyOnWriteArrayList</td></tr><tr class="b"><td align="center">newMap(...)</td><td align="center">java.util.HashMap</td></tr><tr class="a"><td align="center">newConcurrentMap(...)</td><td align="center">java.util.concurrent.ConcurrentHashMap</td></tr></table><p>Also this utility can be used for checking if collection is empty:</p><div class="source"><pre>final Set&lt;String&gt; names = CollectionUtils.newConcurrentSet(&quot;Name1&quot;, &quot;Name2&quot;, &quot;Name3&quot;, &quot;Name4&quot;);
// do some staff
if (CollectionUtils.isEmpty(names)) {
  // do some staff
}
</pre></div></div><div class="section"><h3><a name="String_utilities">String utilities</a><a name="String_utilities"></a></h3><p>They are represented by abstract class StringUtils. This utility can be used for working with strings. For example, to check if string is empty we can do:</p><div class="source"><pre>if (StringUtils.isEmpty(text)) {
  // do dome staff
}
</pre></div><p>To convert binary data represented as byte array to string representation in hex form we can use:</p><div class="source"><pre>final byte[] data = calculateData();
final String hexData = StringUtils.toHexString(data);
System.out.println(&quot;Calculated data: &quot; + hexData);
</pre></div></div><div class="section"><h3><a name="Encode_utilities">Encode utilities</a><a name="Encode_utilities"></a></h3><p>They are represented by abstract class EncodeUtils. This utilities provides encode functionality to encode/decode binary data with some algorithms (e.g. MD5, SHA1, BASE64).</p><p>For example, calculating hash sum using MD5 algorithm will look like:</p><div class="source"><pre>final byte[] data = calculateData();
final byte[] md5sum = EncodeUtils.encode(data, &quot;MD5&quot;);
</pre></div><p>It can be very useful for keeping user passwords in DB like hash sums. In such situation it is a good idea to use it with <i>StringUtils.toHexString()</i> or <i>EncodeUtils.encodeBase64()</i>:</p><div class="source"><pre>public String encodePassword(final String password, final boolean useBase64) {
  if (password == null) {
    return null;
  }
  final byte[] bytes = EncodeUtils.encode(password.getBytes(), algorithm);
  return useBase64 ? new String(EncodeUtils.encodeBase64(bytes)) : StringUtils.toHexString(bytes);
}
</pre></div></div><div class="section"><h3><a name="Internationalization_utilities">Internationalization utilities</a><a name="Internationalization_utilities"></a></h3><p>They are represented by abstract class I18nUtils. This utility provides functionality for working with locales. It can convert strings to locales and also can create list of candidate locales for certain locale.</p><p>To parse locale from string just type:</p><div class="source"><pre>final Locale locale = I18nUtils.getLocale(&quot;ru_RU&quot;);
</pre></div><p>Sometimes it is necessary in project to use resources in some other similar to original locale when resources in original are missing. In that case this code will be useful:</p><div class="source"><pre>final List&lt;Locale&gt; locales = I18nUtils.getCandidateLocales(resourceLocale);
for (Locale candidate : locales) {
  // do some staff
}
</pre></div></div><div class="section"><h3><a name="Reflection_utilities">Reflection utilities</a><a name="Reflection_utilities"></a></h3><p>They are represented by abstract class ReflectionUtils. This utility makes using java reflection easier. It provides methods for finding constructors by parameter types, extracting exceptions from throwable cause, creating new object instances by class and constructor parameters, getting wrapper type for primitives.</p><p>Creation of new instance of SimpleDateFormat will look like:</p><div class="source"><pre>final SimpleDateFormat format =
  ReflectionUtils.newInstance(SimpleDateFormat.class, &quot;yyyy-MM-dd&quot;, Locale.ENGLISH);
</pre></div><p>To find all correspondent constructors for specified class we can use:</p><div class="source"><pre>final List&lt;Constructor&lt;SimpleDateFormat&gt;&gt; constructors =
  ReflectionUtils.findConstructors(SimpleDateFormat.class, String.class);
</pre></div><p>If we need to extract some exception from some other exception cause we can use such code:</p><div class="source"><pre>try {
  // do some staff
} catch (RuntimeException exception) {
  final SecurityException se = ReflectionUtils.findException(exception, SecurityException.class);
  if (se != null) {
    throw se;
  }
}
</pre></div></div><div class="section"><h3><a name="Ordering_utilities">Ordering utilities</a><a name="Ordering_utilities"></a></h3></div><div class="section"><h3><a name="Lock_utilities">Lock utilities</a><a name="Lock_utilities"></a></h3></div><div class="section"><h3><a name="Other_helpers">Other helpers</a><a name="Other_helpers"></a></h3></div></div><div class="section"><h2><a name="Javassist_utilities">Javassist utilities</a><a name="Javassist_utilities"></a></h2></div><div class="section"><h2><a name="Hibernate_utilities">Hibernate utilities</a><a name="Hibernate_utilities"></a></h2></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                   2009-2011.
          All Rights Reserved.      
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
